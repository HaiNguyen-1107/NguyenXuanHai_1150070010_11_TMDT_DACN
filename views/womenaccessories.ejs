<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tất cả sản phẩm | Fashion Shop</title>

    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/home.css">
    <link rel="stylesheet" href="/assets/css/footer.css">
    <link rel="stylesheet" href="/assets/css/products.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

    <%- include('partials/header') %>

        <!-- BREADCRUMB -->
        <div class="breadcrumb">
            <a href="/home">Trang chủ</a>
            <span>›</span>
            <span class="current"> Áo nữ</span>
        </div>

        <section class="categories">
            <div class="categories-list">

                <div class="category-item">
                    <a href="menshirt">
                        <img src="/assets/img/menshirt.jpg">
                        <h3>Áo nam</h3>
                    </a>
                </div>


                <div class="category-item">
                    <a href="menpants">
                        <img src="/assets/img/menpants.jpg">
                        <h3>Quần nam</h3>
                    </a>
                </div>

                <div class="category-item">
                    <a href="menaccessories">
                        <img src="/assets/img/men accessories .jpg">
                        <h3>Phụ kiện nam</h3>
                    </a>
                </div>

                <div class="category-item">
                    <a href="womenshirt">
                        <img src="/assets/img/women's shirt.jpg">
                        <h3>Áo nữ</h3>
                    </a>
                </div>

                <div class="category-item">
                    <a href="womenpants">
                        <img src="/assets/img/women's pants.jpg">
                        <h3>Quần nữ</h3>
                    </a>
                </div>

                <div class="category-item">
                    <a href="womenaccessories">
                        <img src="/assets/img/phukien.jpg">
                        <h3>Phụ kiện nữ</h3>
                    </a>
                </div>

            </div>
        </section>

        <!-- ========== LAYOUT 2 CỘT ========== -->
        <div class="products-container">

            <div class="filter-sidebar">
                <h3 class="filter-title">Bộ lọc sản phẩm</h3>

                <!-- Thương hiệu -->
                <div class="filter-group">
                    <h4>Thương hiệu</h4>
                    <label><input type="checkbox"> Nike</label>
                    <label><input type="checkbox"> Adidas</label>
                    <label><input type="checkbox"> Gucci</label>
                    <label><input type="checkbox"> LV</label>
                </div>

                <!-- Loại sản phẩm -->
                <div class="filter-group">
                    <h4>Loại sản phẩm</h4>
                    <label><input type="checkbox"> Áo</label>
                    <label><input type="checkbox"> Quần</label>
                    <label><input type="checkbox"> Phụ kiện</label>
                </div>

                <!-- Giá -->
                <div class="filter-group">
                    <h4>Giá</h4>
                    <label><input type="checkbox"> Dưới 200k</label>
                    <label><input type="checkbox"> 200k – 500k</label>
                    <label><input type="checkbox"> 500k – 1 triệu</label>
                    <label><input type="checkbox"> Trên 1 triệu</label>
                </div>
            </div>


            <!-- DANH SÁCH SẢN PHẨM -->
            <div class="products-content">
                <!-- PHẦN SẮP XẾP -->
                <div class="sort-section">
                    <h3 class="sort-title">Phụ kiện nữ</h3>
                    <div class="sort-dropdown">
                        <button class="sort-button">
                            Sắp xếp theo
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="sort-options">
                            <div class="sort-option active">Mặc định</div>
                            <div class="sort-option">A – Z</div>
                            <div class="sort-option">Z – A</div>
                            <div class="sort-option">Giá tăng dần</div>
                            <div class="sort-option">Giá giảm dần</div>
                            <!-- ĐÃ BỎ HÀNG MỚI NHẤT VÀ CŨ NHẤT -->
                        </div>
                    </div>
                </div>

                <div class="product-list">

                    <% womenaccessories.forEach(p=> { %>
                        <div class="product-card">

                            <!-- ẢNH: click vào → vào chi tiết -->
                            <a href="/product/<%= p.ProductID %>" class="product-link">
                                <div class="product-img">
                                    <img src="<%= p.Image %>" alt="">
                                </div>
                            </a>

                            <!-- ICON HOVER -->
                            <div class="product-actions">

                                <!-- YÊU THÍCH (chưa login) -->
                                <button onclick="requireLogin()">
                                    <i class="fa-regular fa-heart"></i>
                                </button>

                                <!-- THÊM GIỎ (chưa login) -->
                                <button onclick="requireLogin()">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                </button>

                            </div>

                            <!-- TÊN + GIÁ -->
                            <h4 class="product-name">
                                <a href="/product/<%= p.ProductID %>">
                                    <%= p.ProductName %>
                                </a>
                            </h4>

                            <p class="product-price">
                                <%= p.Price.toLocaleString() %>đ
                            </p>
                        </div>

                        <% }) %>


                </div>

            </div>

        </div>





        <%- include('partials/footer') %>

            <script>
                function requireLogin() {
                    const isLoggedIn = <%= user ? "true" : "false" %>;

                    if (!isLoggedIn) {
                        document.querySelector("#loginModal").style.display = "flex";
                    }
                }

                // ========== SORT DROPDOWN FUNCTIONALITY ==========
                const sb = document.querySelector('.sort-button'), so = document.querySelector('.sort-options'), soi = document.querySelectorAll('.sort-option'), pl = document.querySelector('.product-list');
                sb.addEventListener('click', e => { e.stopPropagation(); so.classList.toggle('show') });
                document.addEventListener('click', e => { if (!e.target.closest('.sort-dropdown')) so.classList.remove('show') });
                soi.forEach(o => o.addEventListener('click', function () { soi.forEach(x => x.classList.remove('active')); this.classList.add('active'); sb.innerHTML = this.textContent + ' <i class="fas fa-chevron-down"></i>'; so.classList.remove('show'); const ps = Array.from(pl.querySelectorAll('.product-card')); ps.sort((a, b) => { const nA = a.querySelector('.product-name').textContent.trim(), nB = b.querySelector('.product-name').textContent.trim(), pA = parseInt(a.querySelector('.product-price').textContent.replace(/[^\d]/g, '')), pB = parseInt(b.querySelector('.product-price').textContent.replace(/[^\d]/g, '')), t = this.textContent.trim(); return t === 'A – Z' ? nA.localeCompare(nB, 'vi') : t === 'Z – A' ? nB.localeCompare(nA, 'vi') : t === 'Giá tăng dần' ? pA - pB : t === 'Giá giảm dần' ? pB - pA : 0 }); ps.forEach(p => pl.appendChild(p)) }));

            </script>

</body>

</html>